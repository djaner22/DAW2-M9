/* uglify - 2020-11-02 09:11:52 - */
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var l=0;l<t.length;l++){var r=t[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,l){return t&&_defineProperties(e.prototype,t),l&&_defineProperties(e,l),e}function _defineProperty(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var ClickAndDriveHandler=function(){"use strict";function e(){_classCallCheck(this,e),_defineProperty(this,"DAYS_EXPIRATION",1)}return _createClass(e,[{key:"getAll",value:function(){return this.isValidDate()||this.removeAll(),localStorageHandler.getObject(localStorageHandler.CLICK_AND_DRIVE)}},{key:"add",value:function(t){var e,l=this.getAll();return!((l=l||[]).length>=drivePickingMaxItem)&&(l.push(t),1===l.length&&((e=oMortarStoreHandler.getAll()).forEach(function(e){e.custom_selectedFilter=e.magasin.id===t.storeId}),oMortarStoreHandler.setAll(e),oPageListPersistentFilter._initFilteredUrl()),this.setAll(l),!0)}},{key:"delete",value:function(t){var e,l=this.getAll();l&&(e=l.findIndex(function(e){return e.sku===t}),l.splice(e,1),this.setAll(l))}},{key:"getStore",value:function(){var e=this.getAll();return e?e[0].store:null}},{key:"getSkus",value:function(){var e=this.getAll();return e?e.map(function(e){return e.sku.toString()}):null}},{key:"getStoreId",value:function(){var e=this.getAll();return e?e[0].storeId:null}},{key:"setAll",value:function(e){var t,l;e&&0!==e.length?(localStorageHandler.setObject(localStorageHandler.CLICK_AND_DRIVE,e),l=(t=new Date).setDate(t.getDate()+this.DAYS_EXPIRATION),localStorageHandler.setObject(localStorageHandler.CLICK_AND_DRIVE_EXPIRATION,l)):this.removeAll()}},{key:"removeAll",value:function(){localStorageHandler.remove(localStorageHandler.CLICK_AND_DRIVE_EXPIRATION),localStorageHandler.remove(localStorageHandler.CLICK_AND_DRIVE),setCookie(cookieHandler.__MORTAR_STORES_ID__,null)}},{key:"isValidDate",value:function(){var e=localStorageHandler.getObject(localStorageHandler.CLICK_AND_DRIVE_EXPIRATION);return e&&new Date<new Date(e)}}]),e}();oClickAndDriveHandler=new ClickAndDriveHandler;